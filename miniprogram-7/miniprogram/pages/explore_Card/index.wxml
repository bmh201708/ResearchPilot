<view class="container">
  <view class="nav-bar">
    <view class="brand">
      <view class="brand-icon">
        <view class="book-icon">
          <view class="line"></view>
          <view class="line"></view>
        </view>
      </view>
      <text class="brand-text">INSIGHT DIGEST</text>
    </view>
    <view class="top-btns" bindtap="onSwitchToExplore">
      <view class="icon-btn">
        <image class="btn-image" src="/images/explore/change.png" mode="aspectFit"></image>
      </view>
    </view>
  </view>

  <view class="page-header">
    <view class="title-line">Quick</view>
    <view class="title-line highlight">Reads</view>
  </view>

  <view class="search-panel">
    <input class="search-input" type="text" value="{{keywords}}" bindinput="onKeywordInput" bindconfirm="onSearchTap" confirm-type="search" placeholder="输入关键词检索论文" />
    <button class="search-btn" loading="{{isLoading}}" bindtap="onSearchTap">搜索</button>
  </view>

  <view wx:if="{{isLoading}}" class="state-text">正在获取推荐论文...</view>
  <view wx:elif="{{errorMsg}}" class="state-text state-error">{{errorMsg}}</view>
  <view wx:elif="{{papers.length === 0}}" class="state-text">暂无结果，换个关键词试试</view>

  <block wx:else>
    <swiper class="paper-swiper" 
            indicator-dots="{{false}}" 
            previous-margin="40rpx" 
            next-margin="40rpx" 
            snap-to-edge="{{true}}">
      <swiper-item wx:for="{{papers}}" wx:key="id">
        <view class="main-card" bindtap="onCardClick" data-id="{{item.id}}">
          <view class="card-header">
            <view class="key-tag">
              <text class="star">★</text>
              <text>{{index === 0 ? 'TOP MATCH' : 'RELEVANT'}}</text>
            </view>
            <view class="bookmark">{{item.yearText}}</view>
          </view>

          <view class="card-body">
            <view class="main-title">{{item.title}}</view>
            <text class="sub-desc">{{item.abstractShort}}</text>
          </view>

          <view class="info-panel">
            <view class="panel-row">
              <view class="stat-item">
                <text class="stat-label">AUTHORS</text>
                <view class="authors-value">{{item.authorsText}}</view>
              </view>
              <view class="divider"></view>
              <view class="stat-item rating-item">
                <text class="stat-label">CITATIONS</text>
                <view class="rating-box">
                  <text class="rating-text">{{item.citationText}}</text>
                </view>
              </view>
            </view>

            <view class="full-summary-btn" catchtap="onPaperTap" data-id="{{item.id}}">
              <text>OPEN DETAIL</text>
              <text class="arrow">↗</text>
            </view>
          </view>
        </view>
      </swiper-item>
    </swiper>
    <view class="swipe-hint">← Swipe to explore more ({{papers.length}}) →</view>
  </block>
</view>